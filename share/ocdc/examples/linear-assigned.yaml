# yaml-language-server: $schema=../poll-config.schema.json
#
# Linear Issues Poll Configuration
#
# Polls for Linear issues assigned to you and creates devcontainer
# sessions with OpenCode to work on them.
#
# Prerequisites:
# - MCP server 'linear' configured in ~/.config/opencode/opencode.json
# - LINEAR_API_TOKEN environment variable set
#
# Example MCP configuration:
#   {
#     "mcp": {
#       "linear": {
#         "type": "remote",
#         "url": "https://mcp.linear.app/sse",
#         "enabled": true,
#         "headers": {
#           "Authorization": "Bearer ${LINEAR_API_TOKEN}"
#         }
#       }
#     }
#   }
#
# Fetch options:
#   fetch:
#     assignee: "@me"                      # Issues assigned to you (use null for any)
#     state: ["started", "unstarted"]      # Filter by state(s)
#     exclude_labels: []                   # Exclude issues with these labels
#     team: "ENG"                          # Filter by team key

id: linear-assigned
source_type: linear_issue

# Fetch issues assigned to me
fetch:
  assignee: "@me"

# Map Linear teams/labels to local repositories
# Most specific rule wins (team+labels > labels > team)
repo_filters:
  - team: "ENG"
    repo_path: "~/code/engineering"
  - team: "PROD"
    repo_path: "~/code/product"
